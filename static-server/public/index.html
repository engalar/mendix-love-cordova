<!DOCTYPE html>
<html>

<head>

</head>

<body>
  <p>i am in mendix</p>
  <button onclick="scan()">scan bar code</button>
  <script>
    debugger
    addEventListener('message', event => {
      if (event.data.format) {
        alert(" 扫码结果\n" + "Result: " + result.text + "\n" + "Format: " + result.format + "\n" + "Cancelled: " +
          result.cancelled);
      }
    });
    function scan() {
      debugger
      console.log('scan btn clicked', window.parent);
      window.parent.postMessage('scan', '*');
    }
    window.onerror = function (msg, url, lineNo, columnNo, error) {
      var string = msg.toLowerCase();
      var substring = "script error";
      if (string.indexOf(substring) > -1) {
        alert('Script Error: See Browser Console for Detail');
      } else {
        var message = [
          'Message: ' + msg,
          'URL: ' + url,
          'Line: ' + lineNo,
          'Column: ' + columnNo,
          'Error object: ' + JSON.stringify(error)
        ].join(' - ');

        alert(message);
      }

      return false;
    };
  </script>
  <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
  <script>
    // VConsole will be exported to `window.VConsole` by default.
    var vConsole = new window.VConsole();
        // vConsole.setSwitchPosition(100, 100);
  </script>
</body>

</html>